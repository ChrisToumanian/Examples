Compile NASA's testprog:
gcc -o testprog testprog.c buffers.c cfileio.c checksum.c drvrmem.c drvrfile.c drvrnet.c drvrsmem.c editcol.c edithdu.c eval_l.c eval_y.c eval_f.c fitscore.c getcol.c getcolb.c getcold.c getcole.c getcoli.c getcolj.c getcolk.c getcoll.c getcols.c getcolsb.c getcoluk.c getcolui.c getcoluj.c getkey.c group.c grparser.c histo.c iraffits.c modkey.c putcol.c putcolb.c putcold.c putcole.c putcoli.c putcolj.c putcolk.c putcoluk.c putcoll.c putcols.c putcolsb.c putcolu.c putcolui.c putcoluj.c putkey.c region.c scalnull.c swapproc.c wcssub.c wcsutil.c imcompress.c quantize.c ricecomp.c pliocomp.c fits_hcompress.c fits_hdecompress.c simplerng.c zlib/adler32.c zlib/crc32.c zlib/deflate.c zlib/infback.c zlib/inffast.c zlib/inflate.c zlib/inftrees.c zlib/trees.c zlib/uncompr.c zlib/zcompress.c zlib/zuncompress.c zlib/zutil.c -lm

C standard math library, libm.so is not linked by default:
-lm

Compile exampleprogram from Quick Guide:
gcc -o exampleprogram exampleprogram.c buffers.c cfileio.c checksum.c drvrmem.c drvrfile.c drvrnet.c drvrsmem.c editcol.c edithdu.c eval_l.c eval_y.c eval_f.c fitscore.c getcol.c getcolb.c getcold.c getcole.c getcoli.c getcolj.c getcolk.c getcoll.c getcols.c getcolsb.c getcoluk.c getcolui.c getcoluj.c getkey.c group.c grparser.c histo.c iraffits.c modkey.c putcol.c putcolb.c putcold.c putcole.c putcoli.c putcolj.c putcolk.c putcoluk.c putcoll.c putcols.c putcolsb.c putcolu.c putcolui.c putcoluj.c putkey.c region.c scalnull.c swapproc.c wcssub.c wcsutil.c imcompress.c quantize.c ricecomp.c pliocomp.c fits_hcompress.c fits_hdecompress.c simplerng.c zlib/adler32.c zlib/crc32.c zlib/deflate.c zlib/infback.c zlib/inffast.c zlib/inflate.c zlib/inftrees.c zlib/trees.c zlib/uncompr.c zlib/zcompress.c zlib/zuncompress.c zlib/zutil.c -lm

gcc -o fitsreader fitsreader.c cfitsio/buffers.c cfitsio/cfileio.c cfitsio/checksum.c cfitsio/drvrmem.c cfitsio/drvrfile.c cfitsio/drvrnet.c cfitsio/drvrsmem.c cfitsio/editcol.c cfitsio/edithdu.c cfitsio/eval_l.c cfitsio/eval_y.c cfitsio/eval_f.c cfitsio/fitscore.c cfitsio/getcol.c cfitsio/getcolb.c cfitsio/getcold.c cfitsio/getcole.c cfitsio/getcoli.c cfitsio/getcolj.c cfitsio/getcolk.c cfitsio/getcoll.c cfitsio/getcols.c cfitsio/getcolsb.c cfitsio/getcoluk.c cfitsio/getcolui.c cfitsio/getcoluj.c cfitsio/getkey.c cfitsio/group.c cfitsio/grparser.c cfitsio/histo.c cfitsio/iraffits.c cfitsio/modkey.c cfitsio/putcol.c cfitsio/putcolb.c cfitsio/putcold.c cfitsio/putcole.c cfitsio/putcoli.c cfitsio/putcolj.c cfitsio/putcolk.c cfitsio/putcoluk.c cfitsio/putcoll.c cfitsio/putcols.c cfitsio/putcolsb.c cfitsio/putcolu.c cfitsio/putcolui.c cfitsio/putcoluj.c cfitsio/putkey.c cfitsio/region.c cfitsio/scalnull.c cfitsio/swapproc.c cfitsio/wcssub.c cfitsio/wcsutil.c cfitsio/imcompress.c cfitsio/quantize.c cfitsio/ricecomp.c cfitsio/pliocomp.c cfitsio/fits_hcompress.c cfitsio/fits_hdecompress.c cfitsio/simplerng.c cfitsio/zlib/adler32.c cfitsio/zlib/crc32.c cfitsio/zlib/deflate.c cfitsio/zlib/infback.c cfitsio/zlib/inffast.c cfitsio/zlib/inflate.c cfitsio/zlib/inftrees.c cfitsio/zlib/trees.c cfitsio/zlib/uncompr.c cfitsio/zlib/zcompress.c cfitsio/zlib/zuncompress.c cfitsio/zlib/zutil.c -lm


If you want to combine compiled files, it's usually combined into a static library using the ar command:

$ ar cr libfoo.a file1.o file2.o file3.o
You can then use this static library when linking, either passing it directly as an object file:

$ gcc file4.o libfoo.a -o myprogram
Or linking with it as a library with the -l flag

$ gcc file4.o -L. -lfoo -o myprogram

Create library?

gcc -o fitsreader fitsreader.c cfitsio/cfitsiolib.a -lm

ar rcs cfitsiolib.a buffers.o cfileio.o checksum.o drvrmem.o drvrfile.o drvrnet.o drvrsmem.o editcol.o edithdu.o eval_l.o eval_y.o eval_f.o fitscore.o getcol.o getcolb.o getcold.o getcole.o getcoli.o getcolj.o getcolk.o getcoll.o getcols.o getcolsb.o getcoluk.o getcolui.o getcoluj.o getkey.o group.o grparser.o histo.o iraffits.o modkey.o putcol.o putcolb.o putcold.o putcole.o putcoli.o putcolj.o putcolk.o putcoluk.o putcoll.o putcols.o putcolsb.o putcolu.o putcolui.o putcoluj.o putkey.o region.o scalnull.o swapproc.o wcssub.o wcsutil.o imcompress.o quantize.o ricecomp.o pliocomp.o fits_hcompress.o fits_hdecompress.o simplerng.o zlib/adler32.o zlib/crc32.o zlib/deflate.o zlib/infback.o zlib/inffast.o zlib/inflate.o zlib/inftrees.o zlib/trees.o zlib/uncompr.o zlib/zcompress.o zlib/zuncompress.o zlib/zutil.o

ar rcs cfitsiolib.a f77_wrap1.c f77_wrap2.c f77_wrap3.c f77_wrap4.c fitsio.h buffers.o cfileio.o checksum.o drvrmem.o drvrfile.o drvrnet.o drvrsmem.o editcol.o edithdu.o eval_l.o eval_y.o eval_f.o fitscore.o getcol.o getcolb.o getcold.o getcole.o getcoli.o getcolj.o getcolk.o getcoll.o getcols.o getcolsb.o getcoluk.o getcolui.o getcoluj.o getkey.o group.o grparser.o histo.o iraffits.o modkey.o putcol.o putcolb.o putcold.o putcole.o putcoli.o putcolj.o putcolk.o putcoluk.o putcoll.o putcols.o putcolsb.o putcolu.o putcolui.o putcoluj.o putkey.o region.o scalnull.o swapproc.o wcssub.o wcsutil.o imcompress.o quantize.o ricecomp.o pliocomp.o fits_hcompress.o fits_hdecompress.o simplerng.o zlib/adler32.o zlib/crc32.o zlib/deflate.o zlib/infback.o zlib/inffast.o zlib/inflate.o zlib/inftrees.o zlib/trees.o zlib/uncompr.o zlib/zcompress.o zlib/zuncompress.o zlib/zutil.o


Search Directory for string
grep -F "ftgiou" *


.a is a C archive library. Update its index with ranlib.
ranlib cfitsiolib.a

fortranreader.f90:(.text+0x88): undefined reference to `ftgiou'
fortranreader.f90:(.text+0xb8): undefined reference to `ftinit'
fortranreader.f90:(.text+0x1fb): undefined reference to `ftpprj'
fortranreader.f90:(.text+0x23a): undefined reference to `ftpkyj'
fortranreader.f90:(.text+0x25c): undefined reference to `ftclos'
fortranreader.f90:(.text+0x27a): undefined reference to `ftfiou'

Working makefile

CC=gfortran

fortranreader:
	$(CC) -o fortranreader cfitsio/fitsio.h cfitsio/fitsio2.h cfitsio/f77_wrap1.c cfitsio/f77_wrap2.c cfitsio/f77_wrap3.c cfitsio/f77_wrap4.c cfitsio/buffers.c cfitsio/cfileio.c cfitsio/checksum.c cfitsio/drvrmem.c cfitsio/drvrfile.c cfitsio/drvrnet.c cfitsio/drvrsmem.c cfitsio/editcol.c cfitsio/edithdu.c cfitsio/eval_l.c cfitsio/eval_y.c cfitsio/eval_f.c cfitsio/fitscore.c cfitsio/getcol.c cfitsio/getcolb.c cfitsio/getcold.c cfitsio/getcole.c cfitsio/getcoli.c cfitsio/getcolj.c cfitsio/getcolk.c cfitsio/getcoll.c cfitsio/getcols.c cfitsio/getcolsb.c cfitsio/getcoluk.c cfitsio/getcolui.c cfitsio/getcoluj.c cfitsio/getkey.c cfitsio/group.c cfitsio/grparser.c cfitsio/histo.c cfitsio/iraffits.c cfitsio/modkey.c cfitsio/putcol.c cfitsio/putcolb.c cfitsio/putcold.c cfitsio/putcole.c cfitsio/putcoli.c cfitsio/putcolj.c cfitsio/putcolk.c cfitsio/putcoluk.c cfitsio/putcoll.c cfitsio/putcols.c cfitsio/putcolsb.c cfitsio/putcolu.c cfitsio/putcolui.c cfitsio/putcoluj.c cfitsio/putkey.c cfitsio/region.c cfitsio/scalnull.c cfitsio/swapproc.c cfitsio/wcssub.c cfitsio/wcsutil.c cfitsio/imcompress.c cfitsio/quantize.c cfitsio/ricecomp.c cfitsio/pliocomp.c cfitsio/fits_hcompress.c cfitsio/fits_hdecompress.c cfitsio/simplerng.c cfitsio/zlib/adler32.c cfitsio/zlib/crc32.c cfitsio/zlib/deflate.c cfitsio/zlib/infback.c cfitsio/zlib/inffast.c cfitsio/zlib/inflate.c cfitsio/zlib/inftrees.c cfitsio/zlib/trees.c cfitsio/zlib/uncompr.c cfitsio/zlib/zcompress.c cfitsio/zlib/zuncompress.c cfitsio/zlib/zutil.c -lm fitsreader.f90
#	$(CC) -o fortranreader cfitsiolib.a fortranreader.f90 -lm -fno-underscoring


To get arguments in Fortran 90
    type string
        character(len=80), allocatable :: str
    end type string

    DO i = 1, iargc()
       CALL getarg(i, arg)
       WRITE (*,*) arg
    END DO